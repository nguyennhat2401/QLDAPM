{% extends "layout/base.html" %}
{% block content %}
<div class="container mt-4">
    <h3>Diễn đàn - {{ course.title }}</h3>

    <!-- Form đặt câu hỏi -->
    <form method="POST" class="mb-3">
        <div class="input-group">
            <input type="text" name="question_content" class="form-control" placeholder="Nhập câu hỏi của bạn..." required>
            <button class="btn btn-primary">Gửi</button>
        </div>
    </form>

    <!-- Danh sách câu hỏi -->
    <div class="list-group">
        {% for q in questions %}
        <div class="list-group-item">
            <p><b>{{ q.author.fullName }}</b>: {{ q.content }}</p>
            <small class="text-muted">{{ q.createdDate.strftime('%d/%m/%Y %H:%M') }}</small>

            <!-- Trả lời -->
            {% for ans in q.answers %}
            <div class="ms-3 mt-2 p-2 border-start border-3">
                <b>Giảng viên:</b> {{ ans.content }}
                <small class="text-muted">({{ ans.createdDate.strftime('%d/%m/%Y %H:%M') }})</small>
            </div>
            {% endfor %}

            <!-- Form trả lời cho giảng viên -->
            {% if current_user.role.name == "INSTRUCTOR" %}
            <form method="POST" action="/course/{{course.id}}/answer/{{q.id}}" class="mt-2">
                <input type="text" name="answer_content" class="form-control mb-2" placeholder="Nhập câu trả lời..." required>
                <button class="btn btn-sm btn-success">Trả lời</button>
            </form>
            {% endif %}
        </div>
        {% else %}
        <p class="text-muted">Chưa có câu hỏi nào.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}
